<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ИИ или Человек — Интерактив ИТМО</title>
  <style>
    :root {
      --itmo-blue: #0033cc;
      --itmo-light-blue: #4d7dff;
      --itmo-accent: #00aaff;
    }

    body {
      font-family: Arial, sans-serif;
      background: #e6ecff;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #container {
      max-width: 480px;
      width: 100%;
      background: white;
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.15);
      animation: fadeIn 0.6s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    #content img {
      max-width: 100%;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      animation: fadeIn 0.4s ease;
    }

    button {
      width: 100%;
      padding: 14px;
      font-size: 18px;
      margin-top: 10px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      background: var(--itmo-blue);
      color: white;
      transition: 0.25s;
    }
    button:hover {
      background: var(--itmo-light-blue);
      transform: scale(1.02);
    }
    button:nth-child(3) {
      background: #ff0266;
    }
    button:nth-child(3):hover {
      background: #ff3c85;
    }

    #feedback {
      text-align: center;
      font-size: 20px;
      margin-top: 15px;
      min-height: 28px;
      animation: fadeIn 0.3s ease;
    }
    #progressBarContainer {
      width: 100%;
      height: 12px;
      background: #cce0ff;
      border-radius: 6px;
      overflow: hidden;
      margin-top: 10px;
    }
    #progressBar {
      width: 0%;
      height: 100%;
      background: var(--itmo-accent);
      transition: width 0.3s;
    }
    table { border-collapse: collapse; color: #000; margin-top:10px; }
    table, th, td { border: 1px solid #000; padding: 4px 8px; }
  </style>
</head>
<body>
  <div id="container">
    <h2 style="text-align:center; color: var(--itmo-blue)">ИИ или Человек?</h2>
    <p style="text-align:center;color:#555">Определи, кто создал текст или изображение</p>

    <div id="quiz">
      <div id="content"></div>
      <button onclick="selectAnswer('AI')">ИИ</button>
      <button onclick="selectAnswer('human')">Человек</button>
    </div>

    <p id="feedback"></p>
    <div id="progressBarContainer"><div id="progressBar"></div></div>
  </div>

<script>
const items = [
  { type:"text", content:"Кошка прыгает в закате, как процессор в синхронизации потоков.", answer:"AI"},
  { type:"text", content:"Сегодня утром я опоздал на первую пару, потому что забыл дома пропуск.", answer:"human"},
  { type:"text", content:"Тишина кампуса была нарушена только шелестом нейросетей в вечернем серверном зале.", answer:"AI"},
  { type:"text", content:"Когда мы выходили после лабораторной, шел лёгкий снег и пахло кофе из автомата.", answer:"human"},

  // Все картинки загружены в репозиторий в папку images/
  { type:"image", content:"images/cat1.jpg", answer:"human"},
  { type:"image", content:"images/student1.jpg", answer:"human"},
  { type:"image", content:"images/ai_art1.jpg", answer:"AI"},
  { type:"image", content:"images/ai_art2.jpg", answer:"AI"},

  { type:"text", content:"Ветер кружил листья так, будто рендерил частички в игровом движке.", answer:"AI"},
  { type:"image", content:"images/campus.jpg", answer:"human"},
  { type:"image", content:"images/ai_art3.jpg", answer:"AI"}
];

// Рандомизация
items.sort(() => Math.random() - 0.5);

let current = 0;
let score = 0;
let startTime = Date.now();

function showItem(){
  const item = items[current];
  const el = document.getElementById("content");
  if(item.type === 'text') el.innerHTML = `<p style='font-size:20px'>${item.content}</p>`;
  else el.innerHTML = `<img src='${item.content}' id='quizImage'>`;
}

function selectAnswer(choice){
  if(choice === items[current].answer) score++;

  current++;
  document.getElementById('progressBar').style.width = (current/items.length*100)+'%';

  setTimeout(()=>{
    if(current>=items.length) showFinal();
    else showItem();
  }, 500);
}

function showFinal(){
  const time = Math.round((Date.now()-startTime)/1000);
  const percent = Math.round((score/items.length)*100);

  const entry = {score:percent, time, date:new Date().toLocaleString()};
  let records = JSON.parse(localStorage.getItem('itmo_ai_records')||'[]');
  records.push(entry);
  records.sort((a,b)=> b.score-a.score || a.time-b.time);
  records=records.slice(0,5);
  localStorage.setItem('itmo_ai_records', JSON.stringify(records));

  const table = records.map(r=>`<tr><td>${r.score}%</td><td>${r.time} сек</td><td>${r.date}</td></tr>`).join('');

  document.body.innerHTML = `
    <div style='min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:20px;'>
      <h1>Результат</h1>
      <p>Вы разобрались в ИИ на <b>${percent}%</b></p>
      <p>Время прохождения: <b>${time} сек</b></p>
      <h2>ТОП-5 результатов</h2>
      <table>${table}</table>
      <button onclick='location.reload()' style='margin-top:15px; padding:10px 20px;'>Пройти ещё раз</button>
    </div>`;
}

showItem();
</script>
</body>
</html>
